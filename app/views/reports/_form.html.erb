<%= form_with model: report,
              url: reports_path,
              method: :post do |f| %>
  <% if report.errors.any? %>
    <div class="errors">
      <ul>
        <% report.errors.full_messages.each do |m| %>
          <li><%= m %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= hidden_field_tag :from_topic_id, params[:from_topic_id] %>
  <%= hidden_field_tag :reportable_type, report.target_type %>
  <%= hidden_field_tag :reportable_id, report.target_comment_id || report.target_user_id %>

  <div>
    <%= f.label :reason_type, "理由タイプ" %><br>
    <%= f.select :reason_type, Report.reason_types.keys.map { |k| [k, k] }, prompt: "選択してください", required: true %>
  </div>

  <div style="margin-top: 8px;">
    <%= f.label :reason_text, "理由（詳細）" %><br>
    <%= f.text_area :reason_text, rows: 5, required: true %>
  </div>

  <div style="margin-top: 12px;">
    <%= f.submit "保存", class: "btn btn-primary" %>
  </div>
<% end %>
