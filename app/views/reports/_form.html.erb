<%= form_with model: report,
              url: reports_path,
              method: :post do |f| %>
  <%= render partial: "shared/form_errors", locals: { model: report } %>

  <%= hidden_field_tag :from_topic_id, params[:from_topic_id] %>
  <%= hidden_field_tag :reportable_type, report.target_type %>
  <%= hidden_field_tag :reportable_id, report.target_comment_id || report.target_user_id %>

  <div class="form-group">
    <%= f.label :reason_type, "理由タイプ" %>
    <%= f.select :reason_type,
                Report.reason_types.keys.map { |k| [k, k] },
                { prompt: "選択してください" },
                { class: "form-control", required: true } %>
  </div>

  <div class="form-group">
    <%= f.label :reason_text, "理由（詳細）" %>
    <%= f.text_area :reason_text, rows: 5, class: "form-control", required: true %>
  </div>

  <div class="form-actions">
    <%= f.submit "通報を確定", class: "btn btn-primary" %>
    <button type="button" class="close-button" data-controller="close-modal">キャンセル</button>
  </div>
<% end %>
